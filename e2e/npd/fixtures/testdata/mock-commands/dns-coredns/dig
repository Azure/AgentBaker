#!/bin/bash
# dig dispatcher for DNS CoreDNS tests
SCENARIO="${DIG_SCENARIO:-success}"

# Handle special scenarios
case "$SCENARIO" in
    "timeout")
        exec "/mock-commands/dns-coredns/dig-timeout" "$@"
        ;;
    "retry-success")
        exec "/mock-commands/dns-coredns/dig-retry-success" "$@"
        ;;
    *)
        # Look for scenario-specific mock
        if [ -f "/mock-commands/dns-coredns/dig-$SCENARIO" ]; then
            exec "/mock-commands/dns-coredns/dig-$SCENARIO" "$@"
        fi
        ;;
esac

# Default to success scenario
exec "/mock-commands/dns-coredns/dig-success" "$@"
