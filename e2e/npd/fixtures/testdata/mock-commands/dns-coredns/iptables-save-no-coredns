#!/bin/bash
# Mock iptables-save with no CoreDNS/kube-dns rules
case "$*" in
    *"-t nat"*)
        cat <<END
# Generated by iptables-save v1.8.4 on Mon Jul 15 10:00:00 2025
*nat
:PREROUTING ACCEPT [0:0]
:INPUT ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
:POSTROUTING ACCEPT [0:0]
:KUBE-SERVICES - [0:0]
-A PREROUTING -m comment --comment "kubernetes service portals" -j KUBE-SERVICES
-A OUTPUT -m comment --comment "kubernetes service portals" -j KUBE-SERVICES
COMMIT
# Completed on Mon Jul 15 10:00:00 2025
END
        ;;
    *)
        echo "Mock iptables-save: unknown args: $*" >&2
        exit 1
        ;;
esac
