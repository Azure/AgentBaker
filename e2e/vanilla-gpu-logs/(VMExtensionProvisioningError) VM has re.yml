(VMExtensionProvisioningError) VM has reported a failure when processing extension 'CustomScript'. Error message: "Enable failed: failed to execute command: command terminated with exit status=124
[stdout]
{ "ExitCode": "124", "Output": ":03:36.727\",' '\"OperationId\":' '\"2022-09-22' '19:03:36.736\",' '\"Version\":' '\"1.23\",' '\"TaskName\":' '\"AKS.CSE.stop.nvidia-device-plugin\",' '\"EventLevel\":' '\"Informational\",' '\"Message\":' '\"Completed:' systemctlDisableAndStop 'nvidia-device-plugin\",' '\"EventPid\":' '\"0\",' '\"EventTid\":' '\"0\"' '}'\n+ '[' 0 '!=' 0 ']'\n+ [[ false == \\t\\r\\u\\e ]]\n++ date\n++ hostname\n+ echo Thu Sep 22 19:03:36 UTC 2022,abtesf1df000000, 'End configuring GPU drivers'\nThu Sep 22 19:03:36 UTC 2022,abtesf1df000000, End configuring GPU drivers\n+ logs_to_events AKS.CSE.installKubeletKubectlAndKubeProxy installKubeletKubectlAndKubeProxy\n+ local task=AKS.CSE.installKubeletKubectlAndKubeProxy\n+ shift\n++ date +%s%3N\n+ local eventsFileName=1663873416749\n++ date '+%F %T.%3N'\n+ local 'startTime=2022-09-22 19:03:36.752'\n+ installKubeletKubectlAndKubeProxy\n+ CUSTOM_KUBE_BINARY_DOWNLOAD_URL=\n+ [[ ! -z '' ]]\n+ [[ ! -f /usr/local/bin/kubectl-1.24.0 ]]\n++ echo 1.24.0\n++ cut -d. -f2\n+ (( 24 >= 17 ))\n+ '[' -n https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz ']'\n+ logs_to_events AKS.CSE.installKubeletKubectlAndKubeProxy.extractKubeBinaries extractKubeBinaries 1.24.0 https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz\n+ local task=AKS.CSE.installKubeletKubectlAndKubeProxy.extractKubeBinaries\n+ shift\n++ date +%s%3N\n+ local eventsFileName=1663873416758\n++ date '+%F %T.%3N'\n+ local 'startTime=2022-09-22 19:03:36.760'\n+ extractKubeBinaries 1.24.0 https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz\n+ K8S_VERSION=1.24.0\n+ KUBE_BINARY_URL=https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz\n+ mkdir -p /opt/kubernetes/downloads\n+ K8S_TGZ_TMP=kubernetes-node-linux-amd64.tar.gz\n+ retrycmd_get_tarball 120 5 /opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz\n+ tar_retries=120\n+ wait_sleep=5\n+ tarball=/opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz\n+ url=https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz\n+ echo '120 retries'\n120 retries\n++ seq 1 120\n+ for i in $(seq 1 $tar_retries)\n+ tar -tzf /opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz\ntar (child): /opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz: Cannot open: No such file or directory\ntar (child): Error is not recoverable: exiting now\ntar: Child returned status 2\ntar: Error is not recoverable: exiting now\n+ '[' 1 -eq 120 ']'\n+ timeout 60 curl -fsSL https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz -o /opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz\n+ sleep 5\n+ for i in $(seq 1 $tar_retries)\n+ tar -tzf /opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz\nkubernetes/\nkubernetes/node/\nkubernetes/node/bin/\nkubernetes/node/bin/kubeadm", "Error": "", "ExecDuration": "900", "KernelStartTime": "Thu 2022-09-22 18:47:39 UTC", "CSEStartTime": "Thu Sep 22 18:48:42 UTC 2022", "GuestAgentStartTime": "Thu 2022-09-22 18:48:04 UTC", "SystemdSummary": "Startup finished in 5.537s (kernel) + 12min 51.803s (userspace) = 12min 57.341s\ngraphical.target reached after 43.781s in userspace", "BootDatapoints": { "KernelStartTime": "Thu 2022-09-22 18:47:39 UTC", "CSEStartTime": "Thu Sep 22 18:48:42 UTC 2022", "GuestAgentStartTime": "Thu 2022-09-22 18:48:04 UTC", "KubeletStartTime": "" } }

[stderr]
"

More information on troubleshooting is available at https://aka.ms/VMExtensionCSELinuxTroubleshoot
Code: VMExtensionProvisioningError
Message: VM has reported a failure when processing extension 'CustomScript'. Error message: "Enable failed: failed to execute command: command terminated with exit status=124
[stdout]
{ "ExitCode": "124", "Output": ":03:36.727\",' '\"OperationId\":' '\"2022-09-22' '19:03:36.736\",' '\"Version\":' '\"1.23\",' '\"TaskName\":' '\"AKS.CSE.stop.nvidia-device-plugin\",' '\"EventLevel\":' '\"Informational\",' '\"Message\":' '\"Completed:' systemctlDisableAndStop 'nvidia-device-plugin\",' '\"EventPid\":' '\"0\",' '\"EventTid\":' '\"0\"' '}'\n+ '[' 0 '!=' 0 ']'\n+ [[ false == \\t\\r\\u\\e ]]\n++ date\n++ hostname\n+ echo Thu Sep 22 19:03:36 UTC 2022,abtesf1df000000, 'End configuring GPU drivers'\nThu Sep 22 19:03:36 UTC 2022,abtesf1df000000, End configuring GPU drivers\n+ logs_to_events AKS.CSE.installKubeletKubectlAndKubeProxy installKubeletKubectlAndKubeProxy\n+ local task=AKS.CSE.installKubeletKubectlAndKubeProxy\n+ shift\n++ date +%s%3N\n+ local eventsFileName=1663873416749\n++ date '+%F %T.%3N'\n+ local 'startTime=2022-09-22 19:03:36.752'\n+ installKubeletKubectlAndKubeProxy\n+ CUSTOM_KUBE_BINARY_DOWNLOAD_URL=\n+ [[ ! -z '' ]]\n+ [[ ! -f /usr/local/bin/kubectl-1.24.0 ]]\n++ echo 1.24.0\n++ cut -d. -f2\n+ (( 24 >= 17 ))\n+ '[' -n https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz ']'\n+ logs_to_events AKS.CSE.installKubeletKubectlAndKubeProxy.extractKubeBinaries extractKubeBinaries 1.24.0 https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz\n+ local task=AKS.CSE.installKubeletKubectlAndKubeProxy.extractKubeBinaries\n+ shift\n++ date +%s%3N\n+ local eventsFileName=1663873416758\n++ date '+%F %T.%3N'\n+ local 'startTime=2022-09-22 19:03:36.760'\n+ extractKubeBinaries 1.24.0 https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz\n+ K8S_VERSION=1.24.0\n+ KUBE_BINARY_URL=https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz\n+ mkdir -p /opt/kubernetes/downloads\n+ K8S_TGZ_TMP=kubernetes-node-linux-amd64.tar.gz\n+ retrycmd_get_tarball 120 5 /opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz\n+ tar_retries=120\n+ wait_sleep=5\n+ tarball=/opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz\n+ url=https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz\n+ echo '120 retries'\n120 retries\n++ seq 1 120\n+ for i in $(seq 1 $tar_retries)\n+ tar -tzf /opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz\ntar (child): /opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz: Cannot open: No such file or directory\ntar (child): Error is not recoverable: exiting now\ntar: Child returned status 2\ntar: Error is not recoverable: exiting now\n+ '[' 1 -eq 120 ']'\n+ timeout 60 curl -fsSL https://acs-mirror.azureedge.net/kubernetes/v1.24.0/binaries/kubernetes-node-linux-amd64.tar.gz -o /opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz\n+ sleep 5\n+ for i in $(seq 1 $tar_retries)\n+ tar -tzf /opt/kubernetes/downloads/kubernetes-node-linux-amd64.tar.gz\nkubernetes/\nkubernetes/node/\nkubernetes/node/bin/\nkubernetes/node/bin/kubeadm", "Error": "", "ExecDuration": "900", "KernelStartTime": "Thu 2022-09-22 18:47:39 UTC", "CSEStartTime": "Thu Sep 22 18:48:42 UTC 2022", "GuestAgentStartTime": "Thu 2022-09-22 18:48:04 UTC", "SystemdSummary": "Startup finished in 5.537s (kernel) + 12min 51.803s (userspace) = 12min 57.341s\ngraphical.target reached after 43.781s in userspace", "BootDatapoints": { "KernelStartTime": "Thu 2022-09-22 18:47:39 UTC", "CSEStartTime": "Thu Sep 22 18:48:42 UTC 2022", "GuestAgentStartTime": "Thu 2022-09-22 18:48:04 UTC", "KubeletStartTime": "" } }

[stderr]
"