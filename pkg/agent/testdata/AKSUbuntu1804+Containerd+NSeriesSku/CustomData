#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    subreaper = false
    oom_score = 0
    [plugins.cri]
    sandbox_image = "oss/kubernetes/pause:1.3.1"
    [plugins.cri.containerd.untrusted_workload_runtime]
    runtime_type = "io.containerd.runtime.v1.linux" 
    runtime_engine = "/usr/bin/nvidia-container-runtime"
    [plugins.cri.containerd.default_runtime]
    runtime_type = "io.containerd.runtime.v1.linux" 
    runtime_engine = "/usr/bin/nvidia-container-runtime"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF





- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
