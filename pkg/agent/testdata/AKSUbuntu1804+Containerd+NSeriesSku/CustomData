#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    subreaper = false
    oom_score = 0
    [plugins.cri]
    sandbox_image = "oss/kubernetes/pause:1.3.1"
    [plugins.cri.containerd.untrusted_workload_runtime]
    runtime_type = "io.containerd.runtime.v1.linux" 
    runtime_engine = "/usr/bin/nvidia-container-runtime"
    [plugins.cri.containerd.default_runtime]
    runtime_type = "io.containerd.runtime.v1.linux" 
    runtime_engine = "/usr/bin/nvidia-container-runtime"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF





- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
