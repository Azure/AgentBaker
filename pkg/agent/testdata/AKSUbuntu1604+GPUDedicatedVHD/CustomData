[base64(concat('#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SUz07jPBTF93kKq2LxfQsnbalQEfIChsBUVAwiRSxKFTnOJbHq2JHvTWlnmHcf9Q9oSosGhJfX53fOkWXd8Z3VNAnOAZXXNWlnxVWTgQEKvjmb6+XkRlIZzzUSiqhBHxmnpIkybaPpRhoE4wT8TCuYBLeAJD0JaZ7kAoPYzrR3tgJLF9qAiIBUlMOjbAy98kmjFCDGc00JSWpQdHqHQTwHlSy9bjyIVV4msWSRqymSPxsPkXKWpLbg8cUqxHIPV01z7RmvWTSTPjI6e03+iFZZ/V4XrlhLP7IxO/ivco0l9swKDzV7aL1NemixZ/akGDf/M26AtdmEnTAqwbJ17ArnPNM236m5Ozhhj7q1r/3GppJT4FhKD7tuQfAGxCWJC1RkGH9iFijU9awXkqpTD+Q1YFf0/w0p5yFEV8m5ctaKztFhv/eJqErOU1zYNJNqalzxUX6VWgGiLCBVDkn02p+kssYjiX77ow9jQRdluPnFYaFSKj1g2RG99vHR1zy6ot857n7N43DzdNsufG0DGcnMADJOzMrlXzEaaa9U12+ltqnAa7UDvbMY2EPANodzsEszjuBn4LdurMuBG5mBQdE6+HV1dxYP41F6/eM8ToenZ/Ew+d3aAmaiy7YHzjQV8No0hbY81369Z5Y1vAUCjNaKtQD/Yg9e0i6Gp5fJvovb+HKQjOLbVZ894/vB6Hs6Oh1cj5IgGA8skjRmEtxLS5CfLUTVGNK8QfAhSV8A/QkAAP//lvMgPnQFAAA=



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";




    
        
    

- path: /etc/systemd/system/docker.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStart=
    ExecStart=/usr/bin/dockerd -H fd:// --storage-driver=overlay2 --bip=
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/docker/daemon.json
  permissions: "0644"
  owner: root
  content: |
    {
      "live-restore": true,
      "log-driver": "json-file",
      "log-opts":  {
         "max-size": "50m",
         "max-file": "5"
      }
      ,"default-runtime": "nvidia",
      "runtimes": {
         "nvidia": {
             "path": "/usr/bin/nvidia-container-runtime",
             "runtimeArgs": []
        }
      }
    }







- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=--address=0.0.0.0 --anonymous-auth=false --authentication-token-webhook=true --authorization-mode=Webhook --azure-container-registry-config=/etc/kubernetes/azure.json --cgroups-per-qos=true --client-ca-file=/etc/kubernetes/certs/ca.crt --cloud-config=/etc/kubernetes/azure.json --cloud-provider=azure --cluster-dns=10.0.0.10 --cluster-domain=cluster.local --enforce-node-allocatable=pods --event-qps=0 --eviction-hard=memory.available<750Mi,nodefs.available<10%,nodefs.inodesFree<5% --feature-gates=RotateKubeletServerCertificate=true,a=b,PodPriority=true,x=y --image-gc-high-threshold=85 --image-gc-low-threshold=80 --kube-reserved=cpu=100m,memory=1638Mi --max-pods=110 --node-status-update-frequency=10s --pod-manifest-path=/etc/kubernetes/manifests --pod-max-pids=-1 --protect-kernel-defaults=true --read-only-port=10255 --resolv-conf=/etc/resolv.conf --rotate-certificates=true --streaming-connection-idle-timeout=4h0m0s --system-reserved=cpu=2,memory=1Gi --tls-cert-file=/etc/kubernetes/certs/kubeletserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_128_GCM_SHA256 --tls-private-key-file=/etc/kubernetes/certs/kubeletserver.key 
    KUBELET_REGISTER_SCHEDULABLE=true
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=',variables('labelResourceGroup'),'

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
'))]