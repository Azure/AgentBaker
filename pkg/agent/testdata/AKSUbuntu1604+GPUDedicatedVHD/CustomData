[base64(concat('#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/9xZbVPbSBL+7l/R69UtkFvZlh1YEkq5FdbgqDCSSi+wXMJOCWlsqxCSI41JsoH/fjWjV7+QNdm9Ind8MupnerqffqanZf/4Q/c6jLvXXjZrtZBlYfvSdtDZ0Blj21EsB58o2lh+Cdw2HBuuijVdc7CjnSHDdeT93HKijRG+UJzh28pykFveGmMVXyhjTXd/U0ZId+RfcoOFxkix0QbAYQ5QTAdruu0o43Hl9FVu0h1zzST1alseemWRcovtGGaRn8qN9qU+VGtYP4epxvAUWWv++70ls2pc6GNDqZf3pSX7KbrcgFnegmXIcJV5sGRuFKBfVODMOL7ky8aaXSfYL6pwZuOROXpk64OGh7XcipqcHtrYcnVd00eVbdCrbWteB0XSp+4xYprRDQefGK6uyoMiVe1stGHZoF42Rk4z00GpNUN3FE1HuQfTbUQ7KNId6tq665dSxYVpGSpW0fEGUH8dZJ6OsKKqheAH0DwOasVYbj0suVRNyzhGxdNCnIbrHDMKWAp6btpvcKiYGraRdY6sJkDaCFB1G48N49Q1C1h/I0z5t2uhdXBJsuIomzVx0GsgVsV4IDWMq4I56K9USV33/kvhfejajnGGbaRYw7dYNc4UTbfzEA8LyMh0sWpp58iym1o4fLluXo3kcL+BQefaEGFz7I40fcnRQQ3S9BMDW8YZHhqW5ZoOUuXDQv726LdH93nVW8c0dngl1U1LVbRxzeOrRjtzTVVxUG0qFDO0EdPhuWZrho7toaWZDj9KFlLUy0aH6zU2YQ3ANUeWoqIGohGG6VqjQppSr6iXfWmzY2ohVilZ6hUSGWo2VmxbG+nYMgwHmxeyVHbNho13eRNZZ5rNIpWlsmWaCm9YQ8O85CBZkpqeTXN8iU3Fti8Mix+LE20kS9I+LB2xqusZhYAl6aA4hedv1Xzzur9IZUtktmNXG6sYWZZhyRLrhvmy/FzYjjI8xSPkYMU6w45xinRZKrv5KkRHzoVhnRZBupbi8ETL5r4Kt91jHTnYtNCJ9psssf7eMmxZ2M2SlIKYQpdQv/tCTElEvIzAPUy9jzewc+tRf7Yr9H6G7u+7morH2imSd/0kJUm2d6+p8m7nxd6e0P0ZvD34AvM0jCnQZDGfk3TXe9e/Au/d4GrvCMinkMLDzl7LPXZ1x8WGjXXlDMnt/P92y3qLxvVT9l+7NTQsZNj10/z/dqvo4nJ3kaXdKPG9iA8HN4tr4tOolRcot7LnQeLfkLRFPs1ZsvwAnssvpcOO1D/o9PpLBmQ7TbfxXRiEXks/11RNKSvPzhRju9/pdQatlYdSRxp0JFEq19T3g+XqTP9Ly3srrm33hBUoj1g67PRedfqi1Gp5c3rrpTcXyjiMF5+UKYnp7h58aQEAfPRCiidJir05xVHi32T8cUpo+tm/DXA4wRMvjBYpASanfejvgzenInMIggQfvYg59ZhTuL+H93x5OIF376AtSG2QZWjPkihow9XVEdAZiTmC/fGyChvnJ44h0YqfRfynnh4duDh2ErYeWq0NyVV8MFtIMlmQjnJusoiQuSz0j4CGtyRZUFkYHEE2CycUfvpp5UO+SZJCCGEMwm5GPoAEQuF07wiCpIq5cAdC9eHLrw/M03VKvJuay5JPEEIQyYfKG6ySwInwZwmgT8RfUBLA+7bw6/s2W8j2yI6WoCmhizQGqSYxysgSgqcOQk1DZZ2E/GOQxPmKP9n2YRPlOE5wRj2a/b9w/3cR2mBrSiimXnrtRVHFEvVS/DWmcjhnapFGsvCyrlBb+NJY/VAS3n6EugZ2hT4vBZH+MeEQtts21DW8fSN9ZbEOeuAv0gjESWaPQeAfkyqWv8444UL2rqOt2sIkjMjco7MG40dw50Vh4NEwibGXTjNZ2F+qwrYV2Mi+UO4Iwso2/30FlyUYbC5BGdnSGn92mwTwz0+PmLctUXVTMS9PLAyHzr07EsjdZE673h+LlHT9KFkEYhiHVGTYrMMRHDtNyRzEkw+sWKWfhzYIHMFoLqjqPaVwldOdH5FxstMoZFm352s6HEkCEENod1l43aC9UjAu3jrmN28KOpq1qaaIesCYhRGBySIjKXTvvLQbhdfdYH4zZUPSTf3Im9NuFGY0azz3PX9GuMVL/Vl4Rwrjm25A7rrxIoqg/+YnaYlkHuXOhRfSMJ7yypRjaTJhkwvw8HZay/QMmkpjSbA+sJgHHl2XmpQXnaFyBE4WdL6gcpfezlm04pRQMTd1ksWTLqZHxjGeWD5oquhYU3R8Yhm6g3RVjpM4jClJPZ+Gd3XlGcMgin4ST8Ipm95ED0RxkqQ+4Q8DMqmwRcggTkD8DGGc0WYb/QF2S0CeE+cc7oESAsIaC2z65zpH0P59990FunrdebF3v/uOoKs07bzYE9p7TO91e/I9usnP5l62Gfw3nZtCDPtbzjkrtJTzzmNzdS2sguJnGHyeVV9F2uymUOc309evjTm7urLXr+V2cy2f8UUxTsRihZgSP7m9JXGQMYU+97BWnv66RzxRMBURj+e4cXT/qqjmi3T6HO8xzyopnvSWgnp+4WynjiKnb9FAEGZMktPUC0opLN1aDNfEbLy5GEAsAMX9tYUUHpHB9hLYtvyP31bV9xLZLPk4S6J8lGvcX83M2OLVi2wDNU+7zqrbaZOndeF9Dd7aUpVLely7xLjiCr1tVtsSJ40rbKPOss8ZJbc+jXBKMuql9Gn9BrI7P/ZuSflS+q1v61UYEHjkNonFlESJF2yzoIgbhCKU76UdNLnNaDL/nyOWBf1dsxqE2bav9N8VsUXc3ye3eStgqTyN179KJiNGFHOSvh9C7kiahUmMp9VbIyUZhbawy3/bmMDOP7L38Q60hV/bcA/FzyfncA8z4gUgxiDt5d90C1K79dCq1YtipgElDuylrrvWj0Hq9WAfBj0Q8nwslP9+ZzuK49qy8K/ldZBRjy4yEKR8GJ17U5KCGMGb4s08mRZflgiSmGM7UTJtXE7LG4AYE+it0Vx87yWBnyyiAOKEwjUBHjEJ2q2NlSioDSfww9d/jqiTIXF+UqStts/RAVx/rl08HkuzGmp+JHk5Gq2aE1JHE/GbNQ5pxuaYBZ/32dRfThQfWEidjKR3oU/aa5wt3wdQZitITOaPEZrM501C17rfVm4KbOGH5/7jWzQ2kWUj46T1nwAAAP//FTwo004jAAA=

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SUz07jPBTF93kKq2LxfQsnbalQEfIChsBUVAwiRSxKFTnOJbHq2JHvTWlnmHcf9Q9oSosGhJfX53fOkWXd8Z3VNAnOAZXXNWlnxVWTgQEKvjmb6+XkRlIZzzUSiqhBHxmnpIkybaPpRhoE4wT8TCuYBLeAJD0JaZ7kAoPYzrR3tgJLF9qAiIBUlMOjbAy98kmjFCDGc00JSWpQdHqHQTwHlSy9bjyIVV4msWSRqymSPxsPkXKWpLbg8cUqxHIPV01z7RmvWTSTPjI6e03+iFZZ/V4XrlhLP7IxO/ivco0l9swKDzV7aL1NemixZ/akGDf/M26AtdmEnTAqwbJ17ArnPNM236m5Ozhhj7q1r/3GppJT4FhKD7tuQfAGxCWJC1RkGH9iFijU9awXkqpTD+Q1YFf0/w0p5yFEV8m5ctaKztFhv/eJqErOU1zYNJNqalzxUX6VWgGiLCBVDkn02p+kssYjiX77ow9jQRdluPnFYaFSKj1g2RG99vHR1zy6ot857n7N43DzdNsufG0DGcnMADJOzMrlXzEaaa9U12+ltqnAa7UDvbMY2EPANodzsEszjuBn4LdurMuBG5mBQdE6+HV1dxYP41F6/eM8ToenZ/Ew+d3aAmaiy7YHzjQV8No0hbY81369Z5Y1vAUCjNaKtQD/Yg9e0i6Gp5fJvovb+HKQjOLbVZ894/vB6Hs6Oh1cj5IgGA8skjRmEtxLS5CfLUTVGNK8QfAhSV8A/QkAAP//lvMgPnQFAAA=



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";




    
        
    

- path: /etc/systemd/system/docker.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStart=
    ExecStart=/usr/bin/dockerd -H fd:// --storage-driver=overlay2 --bip=
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/docker/daemon.json
  permissions: "0644"
  owner: root
  content: |
    {
      "live-restore": true,
      "log-driver": "json-file",
      "log-opts":  {
         "max-size": "50m",
         "max-file": "5"
      }
      ,"default-runtime": "nvidia",
      "runtimes": {
         "nvidia": {
             "path": "/usr/bin/nvidia-container-runtime",
             "runtimeArgs": []
        }
      }
    }







- path: /etc/systemd/system/nvidia-modprobe.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=Installs and loads Nvidia GPU kernel module
    [Service]
    Type=oneshot
    RemainAfterExit=true
    ExecStartPre=/bin/sh -c "dkms autoinstall --verbose"
    ExecStart=/bin/sh -c "nvidia-modprobe -u -c0"
    ExecStartPost=/bin/sh -c "sleep 10 && systemctl restart kubelet"
    [Install]
    WantedBy=multi-user.target


- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=--address=0.0.0.0 --anonymous-auth=false --authentication-token-webhook=true --authorization-mode=Webhook --azure-container-registry-config=/etc/kubernetes/azure.json --cgroups-per-qos=true --client-ca-file=/etc/kubernetes/certs/ca.crt --cloud-config=/etc/kubernetes/azure.json --cloud-provider=azure --cluster-dns=10.0.0.10 --cluster-domain=cluster.local --enforce-node-allocatable=pods --event-qps=0 --eviction-hard=memory.available<750Mi,nodefs.available<10%,nodefs.inodesFree<5% --feature-gates=RotateKubeletServerCertificate=true,a=b,PodPriority=true,x=y --image-gc-high-threshold=85 --image-gc-low-threshold=80 --kube-reserved=cpu=100m,memory=1638Mi --max-pods=110 --node-status-update-frequency=10s --pod-manifest-path=/etc/kubernetes/manifests --pod-max-pids=-1 --protect-kernel-defaults=true --read-only-port=10255 --resolv-conf=/etc/resolv.conf --rotate-certificates=true --streaming-connection-idle-timeout=4h0m0s --system-reserved=cpu=2,memory=1Gi --tls-cert-file=/etc/kubernetes/certs/kubeletserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_128_GCM_SHA256 --tls-private-key-file=/etc/kubernetes/certs/kubeletserver.key 
    KUBELET_REGISTER_SCHEDULABLE=true
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,accelerator=nvidia,kubernetes.azure.com/cluster=',variables('labelResourceGroup'),'

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
'))]