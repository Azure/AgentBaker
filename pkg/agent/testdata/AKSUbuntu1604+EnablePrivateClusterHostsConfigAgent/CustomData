[base64(concat('#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6xXbXPauBb+7l9x6jJ56dYYk27a3A6doeA03FDMNSZ77+12PMY6Bk2M5EpyXrbNf9+xDMYkdJt0yodMLB0dPc95eSQ9f2bPKLNnkVwYru+Hp4OhG/7RDXpnYTD46HrToHMMhkQF1o1BE/gEVgI2z5Qd/ZULtGPOVEQZCmlngl9RSTlrxnyZpagQPr8FtUBmgP5hvOBgdlOBEbkFETFQHGQexygl4A1VlM2bzaa5Nr+hClpGQg1Dr2wckEjh4cvGwYJLxaIlHr4EqSKh4lwqvpSxoJl6906jWxpGwgVQoAwaBxK/gANHx63W4VsgXG9QkpE/IhNKnosYm3Jxjw3AXGAG1ukX2H9+5g7Hrj9xvdP9Jzjc24OZwOhSe0zoBlaDgoVfNOAHu+qwNHbnShthKrGyliliBs56B8IZGhIJWBRMuwbbJubjgRvlf09YYFxHVIUJF2FCUyyJOT9cT5lUUZrKIlbfvv0z80dCqrn8SVAxZwmd/0pMG4+G7rTfbgw36PXDsev6Yc/1g07joOyAr9vjg9NBrxu4kzv4BnGuwCL7n/aLBm1vBj7rAWcz8FIPNA4OGl9HXt8NB6O++9+735zDw8Patufu/3btOvYHF93ALaZ/3a4rddHy8gka3gQ6HWj0PN/1JqE3CUfdjy58rvdBqSS9RcTmlM2BYBLlqYLLfIaxSmFGGaQ8jhTlrFST8+l7txcMOzoVKzOtLJWkXUXCFjmzBc44V5bALzkVSLbaz3ffe17gu/+ZDny331EiR6PqtnuTSVRMFFuU6c0FdsmSsqlEsaZqNr5+GE/DIiB3JjzrgFm4NLe5xilGbJp9GE/7gl6hkNrpxVk/HHofJrrsxt3grFOrsqsFsVaFXmlxxbTxYCk8DC1BhbFCAnOeEmRAl9EcIRO49mvWsfXWVT0ozKSeOp0Oh+FgNAm6w2F4LypVzKowDCbhxVn/zoQOFCHYjsAG1lQW6b446wOhUgkOs1yBbt4drBhXkPCcEXOHdhbmumNHXhCeetNRvy7Cu8HrfK+LZlOo0/fTUTCtFWqh6wWrnV4Kius01ziuwtrHTG7CU5L+UEvBW5CXNMvKos+QEWQxRblevqr4R2CsZ5zJojhzQlW/XFo6q7Lq50zRJVYTI1TXXFyO03xOWTV6ns8wRXVeNleXkeK/seA3t3Uwz37U2RqMP+6VrSMwUlg4+hgxmqBUfSoMozR6iK/qtPM3svbVGw2M9edY0KtIYS/NpUJxxqWSa38rAquvf/NcsCjV2Hdnsp69Rwe7+G0XdZsQJ0bntdV6fYLWq9ZRbM2Ofm9bkXPSdhDbrdeI8A5seSvtWS7tq2Xxl5RaYC+uwlzR1M7ZjDKyOfZXR7xzRP/85bv8yUywUcW2iJuFzKbr1kmoIZZaTYvZqNCjTDWLwDeJfXKSoaCc0PgpxRllKpyjCrNczBHaLThqgdNuQZRF8QLbVgFLwl6pid3hoN8NBt4odH2/0zKM7ngQTlz/wvXD/mgS+m7gD9xJp91aI6gZ6L07HXjRzMoaSSm7bL6ow/muO31LnQSTTuV4Euhab22zWU36rib+wnSO3zSPj5pO+6TpHJsv4GGt3OOktev8zSSsQen+f+q7GtDQ886n4/C0Oxg+vAk+wtMuHwnd6FHNtOeNRlUAfm/V2T0tpuXve56dVquuywKVuI2XJKRJmEQ0zQVC4+t3Ft8VV35gMVhXf21bFbDu4NWro+IG94i4aK86IitlbWwf9vePz/3yEgHrS8RLKAcK2WacYPEocWBJWa5wXy+rHmFgxWDKRa4Iv2ZgCXBgz/wJjYkytYzE5R/dIWX5TXeOTEHOFjwlsPcgr09zbedS2CmdVQ0ub6XCJWmSiKa3K/ePxVC97syefsRB+YqDhDIqF0iaRWmARHGFAmLOGMbFGQfxAuNLiDnBf5nQ2M7hPzwXkZGdj8XlJaECrGz3Xb040BXP48WjX75GJiHKb5Lr60JUN4sqSyuTzZTPYc8wykvJPQrGc9c7Nf4OAAD//2wxr/qeDwAA

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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






- path: /opt/azure/containers/reconcilePrivateHosts.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/3SS4U/bOhTFv/uvOJjoPUBy0/IekyhkDI2iVTDoVG1fEJtMckMtUjvYNx0b8L9PSUNJJ9EvtePj3/U992xuxDfGxjc6zIQIxFAO1lU2EL9sS1NSrk0hxC2x0qUJ5BfklSlV7t1csb4NW9t4FEC9TKKttPIFVJieQ32C/EysM816CPYVScgZczmM48G7/d7u3v+99j+et7rY2MDaphSnbl5WTHGNPdKlUQvywTib7PYH+6r/nxoM/smdn2tOmB5YbgvA5LiCjI4kkgSyL3F9AJ6RFQAwPp0m8kDCk86gvK4ffG4C4/DwEDKq68hGmDsPA2Mho8dWc/Xh+lkeIHONoOn1jH413TJUJocSKh/UpMhsv2q+6aKiv1S76yqTg9KZQ7RE4gm3nkoocw/5Xd+F48l42lg+nhxnmacQItlpqv4195Vd9tCUlKszT1z5F2lumkXmLIl2t7orxbMQ0/PRaPJjOvp4eXEyTQZ7Ii2qwORPv5xcJFKK2t8rRJ2v2Eiw0yu9WWimwti73g6uX11v8DLcmRKeUmdTUxBmLnBoXF4jBWNTguF/A6xjHJ9N0XLRyuq26MEw+iI3YsnuEIZrPCnEz1ldrg5eO7r2eDxJoq2387xKkvq9Io4na1kKBVFZ52PNseel76mzbGy18tjk7UzvITu8tcciJk7jxplOmc50ACoCLYtXmUOgDMpAxl1MnHVBr4i3yz4taUwEpTt38R5xRovYVkXR4XwtM82UrQ+OXccm+dL1mxY18RObo8tT8ScAAP//12ej24EEAAA=

- path: /etc/systemd/system/reconcile-private-hosts.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/zTOMU4DMRCF4d6n8AUSn2AbBBJ0KAFRrLaYDG/ZkZyxNTOOCKdHAaV8r/m/+V0llvQIZ5Me0nQ6gJuyVOSC4LI1D8/rba/Ncje5UCBzHR6wNB9hF2Es6e3aMbmce0U6wIMspqa7laQOQ3r6Bh//znISLSfyLZfWo9DPMBRuGiQK82J3wOt/6/km2PuW5hf1oFqX9EEa+Hy4TudRQ3bDYfsg+0L8BgAA//8Sy/8V0QAAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SUz07jPBTF93kKq2LxfQsnbalQEfIChsBUVAwiRSxKFTnOJbHq2JHvTWlnmHcf9Q9oSosGhJfX53fOkWXd8Z3VNAnOAZXXNWlnxVWTgQEKvjmb6+XkRlIZzzUSiqhBHxmnpIkybaPpRhoE4wT8TCuYBLeAJD0JaZ7kAoPYzrR3tgJLF9qAiIBUlMOjbAy98kmjFCDGc00JSWpQdHqHQTwHlSy9bjyIVV4msWSRqymSPxsPkXKWpLbg8cUqxHIPV01z7RmvWTSTPjI6e03+iFZZ/V4XrlhLP7IxO/ivco0l9swKDzV7aL1NemixZ/akGDf/M26AtdmEnTAqwbJ17ArnPNM236m5Ozhhj7q1r/3GppJT4FhKD7tuQfAGxCWJC1RkGH9iFijU9awXkqpTD+Q1YFf0/w0p5yFEV8m5ctaKztFhv/eJqErOU1zYNJNqalzxUX6VWgGiLCBVDkn02p+kssYjiX77ow9jQRdluPnFYaFSKj1g2RG99vHR1zy6ot857n7N43DzdNsufG0DGcnMADJOzMrlXzEaaa9U12+ltqnAa7UDvbMY2EPANodzsEszjuBn4LdurMuBG5mBQdE6+HV1dxYP41F6/eM8ToenZ/Ew+d3aAmaiy7YHzjQV8No0hbY81369Z5Y1vAUCjNaKtQD/Yg9e0i6Gp5fJvovb+HKQjOLbVZ894/vB6Hs6Oh1cj5IgGA8skjRmEtxLS5CfLUTVGNK8QfAhSV8A/QkAAP//lvMgPnQFAAA=



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";




    

- path: /etc/systemd/system/docker.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStart=
    ExecStart=/usr/bin/dockerd -H fd:// --storage-driver=overlay2 --bip=
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/docker/daemon.json
  permissions: "0644"
  owner: root
  content: |
    {
      "live-restore": true,
      "log-driver": "json-file",
      "log-opts":  {
         "max-size": "50m",
         "max-file": "5"
      }
    }








- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=--address=0.0.0.0 --anonymous-auth=false --authentication-token-webhook=true --authorization-mode=Webhook --azure-container-registry-config=/etc/kubernetes/azure.json --cgroups-per-qos=true --client-ca-file=/etc/kubernetes/certs/ca.crt --cloud-config=/etc/kubernetes/azure.json --cloud-provider=azure --cluster-dns=10.0.0.10 --cluster-domain=cluster.local --enforce-node-allocatable=pods --event-qps=0 --eviction-hard=memory.available<750Mi,nodefs.available<10%,nodefs.inodesFree<5% --feature-gates=RotateKubeletServerCertificate=true,a=b,PodPriority=true,x=y --image-gc-high-threshold=85 --image-gc-low-threshold=80 --kube-reserved=cpu=100m,memory=1638Mi --max-pods=110 --node-status-update-frequency=10s --pod-manifest-path=/etc/kubernetes/manifests --pod-max-pids=-1 --protect-kernel-defaults=true --read-only-port=10255 --resolv-conf=/etc/resolv.conf --rotate-certificates=true --streaming-connection-idle-timeout=4h0m0s --system-reserved=cpu=2,memory=1Gi --tls-cert-file=/etc/kubernetes/certs/kubeletserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_256_GCM_SHA384,TLS_RSA_WITH_AES_128_GCM_SHA256 --tls-private-key-file=/etc/kubernetes/certs/kubeletserver.key 
    KUBELET_REGISTER_SCHEDULABLE=true

    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=',variables('labelResourceGroup'),'

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we shouldn't block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp -j DROP
    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
'))]