[base64(concat('#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /usr/local/bin/configure_azure0.sh
  permissions: "0544"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/6SU0W/bNhDG3/lXfJGFqsVmyR720CQQBsF2N6ONEsTZiiFwDVqiLM4KqZJUPNf2/z5QchS5W7ZhexN0d9/9+N2RvbOg0ipYchEw8Ygl1TkhPUyNpyFFsYVgCdOaqi2MRCJFxleVYqBfKsUG4AI/LythKgzf+oPvSaGXC8UKRjVDn2MPulmj/8678ODtSsWFgfvdwWv+ezt3GLrDSxwDw4OHPVaKleh/5nA+VbW06xCe4R7uDzgLMcD8EiZnggAAS3IJb2rANYQ0TzCzNS9bWC5WR1yvqfmdGwxIxskprvo/uHA+1Q78B9i6zv/XzD2McpaswTOr3GQhEfxYa8VNzhTzfR9CQjCW2tGpSsDkXEMnipfGlgtpSA9RoSVSKTyDDRXmJHeTM1GjVrol6ieCk3ucoZ8hYCYJEsEDwYyfBsNBv07xLUrBtcEcr149wVvyeArD6AMemDBcCotKTdPraIrlZSkyqZDQgif2BGYj1RqlLHiy/YuzkNpYJz7Ju4C7iyd3H69v3y9urj9MR78emtHcw/lzBGEIp+nnYH4ytL93foCl4umKWXxaKEbT7fMtSUkPH9nR3O4geAYtfcJLFFysoXO5eZLr+KUqsSiLasXF6zfYHWlKqYz1cTG6vrqK4nHoDutIQs0/j2OP3z7D8wV9YKAabv2xh58I/gtTmktR/348fu/hN/31/fybEDubftFUfYvnmou24tAtGczt/QhkaWom+8Q0C/QomCEHQjqHiW5/nIXe+7ezxc31eBFHV5PZTTSahCnLaFWYy24kbP2NrNwonnrkxJf4LprGk9vpODw/Pz/vxuLJXTwLA1UJa5HQQStFv9i17qRO39W9mMm/FrmJ7n4Ku8cidpC1Hmiawn29pJrV1rq7tuvhTWeeiMZj0j4U/ZX56qVo9VJWwHlJ0Hle0GG9oJ0G48kHcqLyItUfAQAA//+8Xj4iAgYAAA==

- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4yTT08bMRDF7/sprIhDezCG/rkU+QBloRERRWwQhxBFXu8kGcU73trjEFr63atNCJAQpO5pd/x+783a48ENIQ+zU4g2YMPoSV+kEhxw9t1ThW3lyvA0X2DkqFWKQTlvjVMlkpo9SbNsUECYo4Vhdg2RTWBt3L15iFlOcwyeaiA+QwdaAVtVwdgkx898kayFGPMFcsGGU9SHXz5n+QJs0XpdBdDLvNLEqVC+YWV+pwDKemKDBCGurfbjdAdXzyoMQjZCzU1QDsvn5P/RWsL3epFWdHAsBmLvQ+0TsXgUkwCNuOtsJ911xKO4t0K6j0I6EAdiKI4ET4HEKnaJS1kiVW/afFs4EmPs7Or+yaY2M5BxagK8dcs2OaliS0LJpnQQhWRBpvVwGHmnFJttKaUaAto1tJWwNTXW0xgnKcBoeYoH7Zm9AO/MmLjLxNMjJVCbLyOEOYSNFfIVSGdKcFF39v5c3Jzkvbw/uvx5mo96xyd5r/jb2QDm+pOQ8nmQZEjEWIMOUHsGIdcFGeBXgsiy/fCJ9eHXehcogarGI7FOhItvSqmQ6GVQq1ev+9Hb2WYz3qUaZOPSBElWGFbXpd2CQMAQ1UqxEsRX7N76T896x+fFroXr/Lxb9PPr5V7sKN92+z9G/ePuZb/IskGXIhvnhtmtIYbq5EHXyTHKFCHsswkT4H8BAAD//5yxbXI7BAAA



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    subreaper = false
    root = "/mnt/containers"
    oom_score = 0
    [plugins.cri]
    sandbox_image = "oss/kubernetes/pause:1.3.1"
    [plugins.cri.containerd.untrusted_workload_runtime]
    runtime_type = "io.containerd.runtime.v1.linux" 
    runtime_engine = "/usr/bin/runc"
    [plugins.cri.containerd.default_runtime]
    runtime_type = "io.containerd.runtime.v1.linux" 
    runtime_engine = "/usr/bin/runc"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promisMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF






- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=
    KUBELET_IMAGE=hyperkube-amd64:v1.15.7


    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,node-role.kubernetes.io/agent=,kubernetes.io/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Premium_LRS,kubernetes.azure.com/cluster=',variables('labelResourceGroup'),'

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
'))]