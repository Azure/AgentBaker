#cloud-config

write_files:
- path: /opt/azure/containers/provision_source.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_start.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/5SSX4vTQBTF3/MpDmG0CXaM1bdCK0s6SAVbaVLYByFMJ9c2GjNx/ixV1+8u6fYf7lpqniacO7/DnHOTVdUkK2k3SHTrEvnTG0qUbpysGjI2aY2+q2ylm5d2g/EYyZ00Sa3Xh8naW0eGn8Zqvcbr8fNBIG6neZHOJ2LE3gb2h3X0TbkanDeat3JNBryGddJ5i69+RTW5awy4ssS1d613J6/5Mv+4zEcsUtL9N+EeG5IleIM3r+Igy28WeZFPP4gRi0htNEL2gA9xD+UdeIlevwf+GXxwvDyIgzQThbgV6TKfzmfFZLm46Q4HCosiFpXSEV48szE49n+8RMhOpuFOjuM4ePBOM4FcO1lDbEl5V+kGE29kdxiypy0BS0o3pQ2vCpQOYF7uwfa8xb/p2bUx/4MbB8H7bD4rsnwxnb0bsQhfvnfhfwrw6ONcmjVIIWTHdQovTOr2rK0LQIPwol7uDB+9/Ok7vV9iW7lUlzQEI9XHfLdbQzDd9iGM0aYTTB9pJo4tHkq0nVb+7mHfODsLJ6Bt5XB6+p8AAAD//9CDYZutAwAA

- path: /opt/azure/containers/provision.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_installs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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

- path: /opt/azure/containers/provision_configs.sh
  permissions: "0744"
  encoding: gzip
  owner: root
  content: !!binary |
    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







- path: /etc/systemd/system/kubelet.service
  permissions: "0644"
  encoding: gzip
  owner: root
  content: !!binary |
    H4sIAAAAAAAA/4ySz0/bThDF7/4rRhGH7/ewbOmPS5EPUAyNiCjCQRxChNbrgYyynnV3Z0No6f9emRAgYKT6ZM++z5vn1ZucM8k0O8BoA7VCnvPjVKFDyb55rqmbnBqZFUuKEnOdYtDOW+N0Raznj9Ism5QYFmRxmp1hFBMkN+7W3MWs4AUFzw2yHJLDXKNYXeO1SU6e+DJZizEWS5JSjKSY73z+lBVLtGXndRowf9hXmTgD7VvR5lcKqK1nMcQY4tpqO856uGZeUwDVgl6YoB1VT5v/RWuZ3suiLAzoGiaw9V/jEwvcw03AFi4HrzddDuAebi0o9z8oh/ABprALMkOG1doHXKmKuH4T8+1gF65p0Jf+0aYxc1RxZgK+dcs2OaVjR2IlpnIYQQmw6TwcRemVUvtayqnBQHYNPVPvNAYuM3h8lELu3FTEsMCwccK+RuVMhS7mg63fx+f7xagYX538OCiuRnv7xaj8M9gAFvlHUOqpFiokFmowD9h4QVDrgQr4M2EU1X34JPnOl6YPVMh164klT0zLr1rrkPi5dvWL1+3o7XwzjHepQdW6dEOsagqr8ndXEBgFo14pVoL4gt1a/+nhaO+o7Ds4K46G5bg4e7iLnvHFcPz9arw3PBmXWTYZchTj3DS7MCxY79/lTXJCKkUM22LCDcrfAAAA//8PqjOJCQQAAA==



- path: /etc/apt/apt.conf.d/99periodic
  permissions: "0644"
  owner: root
  content: |
    APT::Periodic::Update-Package-Lists "0";
    APT::Periodic::Download-Upgradeable-Packages "0";
    APT::Periodic::AutocleanInterval "0";
    APT::Periodic::Unattended-Upgrade "0";








- path: /etc/containerd/config.toml
  permissions: "0644"
  owner: root
  content: |
    version = 2
    subreaper = false
    oom_score = 0
    [plugins."io.containerd.grpc.v1.cri"]
      sandbox_image = ""
      [plugins."io.containerd.grpc.v1.cri".containerd]
        
        [plugins."io.containerd.grpc.v1.cri".containerd.untrusted_workload_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/runc"
        [plugins."io.containerd.grpc.v1.cri".containerd.default_runtime]
          runtime_type = "io.containerd.runtime.v1.linux"
          runtime_engine = "/usr/bin/runc"
      
      [plugins."io.containerd.grpc.v1.cri".registry.headers]
        X-Meta-Source-Client = ["azure/aks"]
    [metrics]
      address = "127.0.0.1:10257"
    
    #EOF

- path: /etc/containerd/kubenet_template.conf
  permissions: "0644"
  owner: root
  content: |
      {
          "cniVersion": "0.3.1",
          "name": "kubenet",
          "plugins": [{
            "type": "bridge",
            "bridge": "cbr0",
            "mtu": 1500,
            "addIf": "eth0",
            "isGateway": true,
            "ipMasq": true,
            "promiscMode": true,
            "hairpinMode": false,
            "ipam": {
                "type": "host-local",
                "subnet": "{{.PodCIDR}}",
                "routes": [{ "dst": "0.0.0.0/0" }]
            }
          },
          {
            "type": "portmap",
            "capabilities": {"portMappings": true},
            "externalSetMarkChain": "KUBE-MARK-MASQ"
          }]
      }

- path: /etc/systemd/system/containerd.service
  permissions: "0644"
  owner: root
  content: |
    [Unit]
    Description=containerd daemon
    After=network.target

    [Service]
    ExecStartPre=/sbin/modprobe overlay
    ExecStart=/usr/bin/containerd
    Delegate=yes
    KillMode=process
    Restart=always
    OOMScoreAdjust=-999
    LimitNOFILE=1048576
    LimitNPROC=infinity
    LimitCORE=infinity

    [Install]
    WantedBy=multi-user.target

    #EOF

- path: /etc/systemd/system/containerd.service.d/exec_start.conf
  permissions: "0644"
  owner: root
  content: |
    [Service]
    ExecStartPost=/sbin/iptables -P FORWARD ACCEPT
    #EOF

- path: /etc/crictl.yaml
  permissions: "0644"
  owner: root
  content: |
    runtime-endpoint: unix:///run/containerd/containerd.sock
    #EOF

- path: /etc/sysctl.d/11-containerd.conf
  permissions: "0644"
  owner: root
  content: |
    net.ipv4.ip_forward = 1
    net.ipv4.conf.all.forwarding = 1
    net.bridge.bridge-nf-call-iptables = 1
    #EOF






- path: /etc/kubernetes/certs/ca.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    

- path: /etc/kubernetes/certs/client.crt
  permissions: "0644"
  encoding: base64
  owner: root
  content: |
    



- path: /var/lib/kubelet/kubeconfig
  permissions: "0644"
  owner: root
  content: |
    apiVersion: v1
    kind: Config
    clusters:
    - name: localcluster
      cluster:
        certificate-authority: /etc/kubernetes/certs/ca.crt
        server: https://:443
    users:
    - name: client
      user:
        client-certificate: /etc/kubernetes/certs/client.crt
        client-key: /etc/kubernetes/certs/client.key
    contexts:
    - context:
        cluster: localcluster
        user: client
      name: localclustercontext
    current-context: localclustercontext
    #EOF

- path: /etc/default/kubelet
  permissions: "0644"
  owner: root
  content: |
    KUBELET_FLAGS=
    KUBELET_REGISTER_SCHEDULABLE=true
    NETWORK_POLICY=

    KUBELET_NODE_LABELS=kubernetes.azure.com/role=agent,agentpool=agent2,storageprofile=managed,storagetier=Standard_LRS,kubernetes.azure.com/cluster=resourceGroupName

    #EOF

- path: /opt/azure/containers/kubelet.sh
  permissions: "0755"
  owner: root
  content: |
    #!/bin/bash

    


    # Disallow container from reaching out to the special IP address 168.63.129.16
    # for TCP protocol (which http uses)
    #
    # 168.63.129.16 contains protected settings that have priviledged info.
    #
    # The host can still reach 168.63.129.16 because it goes through the OUTPUT chain, not FORWARD.
    #
    # Note: we should not block all traffic to 168.63.129.16. For example UDP traffic is still needed
    # for DNS.
    iptables -I FORWARD -d 168.63.129.16 -p tcp --dport 80 -j DROP
    #EOF

- path: /etc/sysctl.d/999-sysctl-aks.conf
  permissions: "0644"
  owner: root
  content: |
    # This is a partial workaround to this upstream Kubernetes issue:
    # https://github.com/kubernetes/kubernetes/issues/41916#issuecomment-312428731
    net.ipv4.tcp_retries2=8
    net.core.message_burst=80
    net.core.message_cost=40
    net.core.somaxconn=16384
    net.ipv4.tcp_max_syn_backlog=16384
    net.ipv4.neigh.default.gc_thresh1=4096
    net.ipv4.neigh.default.gc_thresh2=8192
    net.ipv4.neigh.default.gc_thresh3=16384

    #EOF

runcmd:
- set -x
- . /opt/azure/containers/provision_source.sh
- aptmarkWALinuxAgent hold
