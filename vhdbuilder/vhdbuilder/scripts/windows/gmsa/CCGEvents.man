<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<assembly
    xmlns="urn:schemas-microsoft-com:asm.v3"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    manifestVersion="1.0"
    >
  <assemblyIdentity
      buildType="$(build.buildType)"
      language="neutral"
      name="Microsoft-Windows-Containers-CCG-Events"
      processorArchitecture="$(build.processorArchitecture)"
      publicKeyToken="$(Build.WindowsPublicKeyToken)"
      version="$(build.version)"
      versionScope="nonSxS"
      />
  <instrumentation
      xmlns:win="http://manifests.microsoft.com/win/2004/08/windows/events"
      buildFilter="not build.isWow"
      >
    <events xmlns="http://schemas.microsoft.com/win/2004/08/events">
      <provider
          guid="{45E7DBC5-E130-5CEF-9353-CC5EBF05E6C8}"
          message="$(string.eventProviderName)"
          messageFileName="%SystemRoot%\system32\ccg.exe"
          name="Microsoft-Windows-Containers-CCG"
          resourceFileName="%SystemRoot%\system32\ccg.exe"
          symbol="MS_CCG_Provider"
          >
        <channels>
          <channel
              chid="adch"
              enabled="true"
              name="Microsoft-Windows-Containers-CCG/Admin"
              type="Admin"
              />
        </channels>
        <opcodes>
          <opcode
              name="Success"
              value="100"
              />
          <opcode
              name="Failed"
              value="101"
              />
        </opcodes>
        <templates>
          <template tid="OneParam">
            <data
                inType="win:UnicodeString"
                name="First"
                />
          </template>
          <template tid="TwoParams">
            <data
                inType="win:UnicodeString"
                name="First"
                />
            <data
                inType="win:UnicodeString"
                name="Second"
                />
          </template>
          <template tid="ThreeParams">
            <data
                inType="win:UnicodeString"
                name="First"
                />
            <data
                inType="win:UnicodeString"
                name="Second"
                />
            <data
                inType="win:UnicodeString"
                name="Third"
                />
          </template>
          <template tid="TwoParamsHresult">
            <data
                inType="win:UnicodeString"
                name="First"
                />
            <data
                inType="win:Int32"
                name="Second"
                outType="win:HResult"
                />
          </template>
          <template tid="NTStatus">
            <data
                inType="win:UInt32"
                name="error"
                outType="win:NTSTATUS"
                />
          </template>
          <template tid="HResult">
            <data
                inType="win:Int32"
                name="First"
                outType="win:HResult"
                />
          </template>
        </templates>
        <tasks>
          <task
              name="CCG"
              value="1"
              />
          <task
              name="Plugin"
              value="2"
              />
        </tasks>
        <events>
          <event
              channel="adch"
              level="win:Informational"
              message="$(string.event_PLUGIN_INSTANTIATE_SUCCESS)"
              opcode="Success"
              symbol="CCGEvt_Plugin_Instantiate_Success"
              task="Plugin"
              template="OneParam"
              value="1"
              />
          <event
              channel="adch"
              level="win:Informational"
              message="$(string.event_GMSA_FETCH_SUCCESS)"
              opcode="Success"
              symbol="CCGEvt_GMSA_Fetch_Success"
              task="CCG"
              template="TwoParams"
              value="2"
              />
          <event
              channel="adch"
              level="win:Error"
              message="$(string.event_PARSING_FAIL)"
              opcode="Failed"
              symbol="CCGEvt_Parsing_Fail"
              task="CCG"
              template="NTStatus"
              value="3"
              />
          <event
              channel="adch"
              level="win:Error"
              message="$(string.event_PLUGIN_INSTANTIATE_FAIL)"
              opcode="Failed"
              symbol="CCGEvt_Plugin_Instantiate_Failure"
              task="Plugin"
              template="TwoParamsHresult"
              value="4"
              />
          <event
              channel="adch"
              level="win:Error"
              message="$(string.event_PLUGIN_INIT_FAIL)"
              opcode="Failed"
              symbol="CCGEvt_Plugin_Init_Failure"
              task="Plugin"
              template="TwoParamsHresult"
              value="5"
              />
          <event
              channel="adch"
              level="win:Error"
              message="$(string.event_PLUGIN_FETCH_FAIL)"
              opcode="Failed"
              symbol="CCGEvt_Plugin_Fetch_Failure"
              task="Plugin"
              template="TwoParamsHresult"
              value="6"
              />
          <event
              channel="adch"
              level="win:Informational"
              message="$(string.event_PLUGIN_REFETCH)"
              opcode="Success"
              symbol="CCGEvt_Plugin_Refetch"
              task="Plugin"
              template="OneParam"
              value="7"
              />
          <event
              channel="adch"
              level="win:Error"
              message="$(string.event_GMSA_FETCH_FAIL)"
              opcode="Failed"
              symbol="CCGEvt_Gmsa_Fetch_Failure"
              task="CCG"
              template="ThreeParams"
              value="8"
              />
          <event
              channel="adch"
              level="win:Error"
              message="$(string.event_PARSING_FAIL_GUID)"
              opcode="Failed"
              symbol="CCGEvt_GUID_Parse_Failure"
              task="CCG"
              template="HResult"
              value="9"
              />
        </events>
      </provider>
    </events>
  </instrumentation>
  <localization>
    <resources culture="en-US">
      <stringTable>
        <string
            id="eventProviderName"
            value="Microsoft-Windows-Containers-CCG"
            />
        <string
            id="event_PLUGIN_INSTANTIATE_SUCCESS"
            value="Container Credential Guard instantiated the plugin: %1."
            />
        <string
            id="event_PLUGIN_INSTANTIATE_FAIL"
            value="Container Credential Guard failed to instantiate the plugin: %1. Error: %2"
            />
        <string
            id="event_PLUGIN_INIT_FAIL"
            value="Container Credential Guard failed to initialize the plugin: %1. Error: %2"
            />
        <string
            id="event_PLUGIN_FETCH_FAIL"
            value="Container Credential Guard failed to fetch credentials from the plugin: %1. Error: %2"
            />
        <string
            id="event_PLUGIN_REFETCH"
            value="Container Credential Guard is refetching the credentials using the plugin: %1."
            />
        <string
            id="event_GMSA_FETCH_SUCCESS"
            value="Container Credential Guard fetched gmsa credentials for %1 using plugin: %2."
            />
        <string
            id="event_GMSA_FETCH_FAIL"
            value="Container Credential Guard failed to fetch gmsa credentials for %1 using plugin %2. Error reason: %3"
            />
        <string
            id="event_PARSING_FAIL"
            value="Container Credential Guard failed to parse the credential spec. Error: %1"
            />
        <string
            id="event_PARSING_FAIL_GUID"
            value="Container Credential Guard failed to parse the plugin GUID in the credential spec. Error: %1"
            />
      </stringTable>
    </resources>
  </localization>
</assembly>
